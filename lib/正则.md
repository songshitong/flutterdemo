1.正则，就是正则表达式，英文是 Regular Expression，简称 RE。顾名思义，正则其实就是一种描述文本内容组成规律的表示方式

2.使用正则要注意的点  
   第⼀，能用普通字符串处理的，坚决⽤普通字符串处理
   第⼆，能写注释的正则表达式，⼀定要写注释
   第三，能用多个简单正则表达式解决的，⼀定不要苛求用一个复杂的正则表达式
   
3. 正则功能
   校验数据的有效性，如校验手机号，邮箱
   查找符合文本要求的内容，如查找符合某种要求的号码
   对文本进行切割，替换等操作，如用连续的空白符进行切割
  
4. 元字符就是指那些在正则表达式中具有特殊意义的专用字符，匹配正常字符-,#,@,数字,字母等直接匹配即可
   特殊单字符： 
     .任意单字符(换行除外)
     \d 任意数字  \D 任意非数字
     \w 任意字母数字下划线  \W 任意非字母数字下划线
     \s 任意空白符        \S  任意非空白符
   空白符：
     \r 回车符 \n换行符 \f换页符 \t制表符 \v垂直制表符  \s任意空白符(各种空白符号和空格)
   量词：
     * 0到多次  + 1到多次   ? 0到1次  {m}出现m次  {m,}至少出现m次   {m,n}m到n次
   范围：
     | 或，如ab|bc代表ab或bc
     [...] 多选一，括号中任意单个元素  [\w\s] 匹配任意字母数字下划线，空白符
     [a-z] a-z之间任意单个元素，(按ASCII表，包含a,z)
     [^..] 取反，不能是括号中的任意单个元素
    
5. 贪婪匹配（Greedy）
   在正则中，表示次数的量词默认是贪婪的，在贪婪模式下，会尝试尽可能最大长度去匹配
   回溯：后面匹配不上，会吐出匹配的再尝试
   xy{1,3}z 匹配 xyyz 
   y{1,3}会尽可能长地去匹配，当匹配完 xyy 后，由于 y 要尽可能匹配最长，即三个，但字符串中后面是个 z 就会导致匹配不上，
     这时候正则就会向前回溯，吐出当前字符 z，接着用正则中的 z 去匹配
   
   
   非贪婪匹配（Lazy）
   非贪婪模式会尽可能短地去匹配。数量元字符后加?(英文) 找出长度最小且满足要求的
   回溯：后面匹配不上，会匹配更长再接着尝试
   xy{1,3}?z 匹配xyyz
   由于 y{1,3}? 代表匹配 1 到 3 个 y，尽可能少地匹配。匹配上一个 y 之后，也就是在匹配上 text 中的 xy 后，
      正则会使用 z 和 text 中的 xy 后面的 y 比较，发现正则 z 和 y 不匹配，这时正则就会向前回溯，重新查看 y 匹配两个的情况，
      匹配上正则中的 xyy，然后再用 z 去匹配 text 中的 z，匹配成功
   
   独占模式（Possessive）
   独占模式会尽可能多地去匹配，如果匹配失败就结束，不会进行回溯。量词元字符后加+(英文)，满足要求情况下，尽可能按最长去匹配
   回溯：不发生回溯，匹配不上即失败
   使用xy{1,2}+yz 匹配xyyz  xy{1,2}匹配xyy    yz匹配不上z   修改为xy{1,2}+z
   
   
6. 分组与编号  
   括号在正则中可以用于分组，被括号括起来的部分“子表达式”会被保存成一个子组
    文本2020-05-10 20:23:05  匹配出日期和时间 (\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2})   分组1是日期，分组2是时间
   
   不保存子组  ?:
   括号只用于归组，把某个部分当成“单个元素”，不分配编号，后面不会再进行这部分的引用
   好处：正则性能会更好，在子组计数时也更不容易出错
   
   (\d{4}-\d{2}-{2}) (?:\d{2}:\d{2}:\d{2})  不保存时间只保存日期
   
   
   括号嵌套
   在括号嵌套的情况里，我们要看某个括号里面的内容是第几个分组怎么办？不要担心，其实方法很简单，我们只需要数左括号（开括号）是第几个，
    就可以确定是第几个子组
    
   文本 ((\d{4})-(\d{2})-(\d{2})) ((\d{2}):(\d{2}):(\d{2}))   1年月日 2年 3月 4日 5时分秒 6时 7分 8秒
   
   
   命名分组
   由于编号得数在第几个位置，后续如果发现正则有问题，改动了括号的个数，还可能导致编号发生变化，
     因此一些编程语言提供了命名分组（named grouping），这样和数字相比更容易辨识，不容易出错。命名分组的格式为(?P<分组名>正则)
     django  url(r'^profile/(?P<username>\w+)/$', view_func)
     
   分组引用
   在知道了分组引用的编号 （number）后，大部分情况下，我们就可以使用 “反斜扛 + 编号”，即 \number 的方式来进行引用，
     而 JavaScript 中是通过$编号来引用，如$1
     需要查看文档确定对应语言的分组查找和替换的引用方式
     
   分组引用在查找中使用
     匹配  前面出现的单词再次出现   (\w+) \1   分组后再匹配一次
     
   分组引用在替换中使用
      匹配日期2020-05-10 20:23:05  格式化为 日期2020-05-10 时间20:23:05  日期\1 时间\5  
   
   样例：
   the little cat cat is in the hat hat hat, we like it.  
   将重复的单词去除 the little cat is in the hat, we like it.
   查找(\w+)(\s\1)+  匹配单词+空格+单词这种内容    替换\1 将匹配到的重复内容替换为单个内容，处理完毕
   
7.匹配模式  正则中一些改变元字符匹配行为的方式，比如匹配时不区分英文字母大小写
   模式修饰符放在整个正则前面时，就表示整个正则表达式都是不区分大小写的。模式修饰符是通过 (? 模式标识) 的方式来表示的
   不区分大小写模式（Case-Insensitive）(?i)  i表示Insensitive
   ((?i)cat) \1   匹配两个不区分大小写的cat，中间有空格
   
   点号通配模式（Dot All）  (?s)  s代表single line
     英文的点（.）可以匹配上包括换行的任何字符
     (?s).+  可以匹配上换行的任何字符
     
   多行匹配模式（Multiline） (?m)
    ^匹配整个字符串的开头，$ 匹配整个字符串的结尾。多行匹配模式改变的就是 ^ 和 $ 的匹配行为，使  ^ 和 $ 能匹配上每行的开头或结尾
    ^the|cat$  在整个字符串的开头匹配the，在整个字符串的结尾匹配cat
    (?m)^the|cat$  ^匹配每行的开头，&匹配每行的结尾
    
    \A 仅匹配整个字符串的开始，\z 仅匹配整个字符串的结束，在多行匹配模式下，它们的匹配行为不会改变，
    如果只想匹配整个字符串，而不是匹配每一行，用这个更严谨一些 
    
   注释模式（Comment）(?#comment) comment是注释内容
     在实际工作中，正则可能会很复杂，这就导致编写、阅读和维护正则都会很困难。我们在写代码的时候，通常会在一些关键的地方加上注释，让代码更易于理解
      (\w+)(?#word) \1(?#word repeat again)
     在很多编程语言中也提供了 x 模式来书写正则，也可以起到注释的作用
       (?mx)  使用多行模式和x模式
     
   HTML 标签是不区分大小写的，比如我们要提取网页中的 head 标签中的内容
    (?si)<head>(.*)<\/head> 匹配不带样式的head
    head支持的全局属性https://www.w3school.com.cn/tags/html_ref_standardattributes.asp
    (?si)<head(.*?)>(.*)<\/head>  匹配带样式的head
    (?si)<head(\s(profile|accesskey|class|contenteditable|contextmenu|data-[\w\d]|dir|draggable|dropzone|hidden|id|lang|spellcheck|style|tabindex|title|translate)(=".*?")?)*>.*<\/head>
 
8. 断言（Assertion）
   断言是指对匹配到的文本位置有要求
   
   单词边界  \b Boundary
     单词的组成一般可以用元字符 \w+ 来表示，\w 包括了大小写字母、下划线和数字（即 [A-Za-z0-9_]）。
     那如果我们能找出单词的边界，也就是当出现了\w 表示的范围以外的字符，比如引号、空格、标点、换行等这些符号，
     我们就可以在正则中使用\b 来表示单词的边界
     \btom\b 只能匹配tom,tom前后不能是字母
   行的开始或结束
     使用 ^ 和 $ 来进行位置界定
     匹配行的开始或结束有什么用，
       日志起始行判断，可以指定日志行的开始规则，比如以时间开头，那些不是以时间开头的可能就是打印的堆栈信息
       输入数据校验，在 Web 服务中，我们常常需要对输入的内容进行校验，比如要求输入 6 位数字，我们可以使用 \d{6} 来校验。
         但你需要注意到，如果用户输入的是 6 位以上的数字呢？在这种情况下，如果不去要求用户录入的 6 位数字必须是行的开头或结尾，就算验证通过了，结果也可能不对
   环视 （ Look Around）
     在正则中我们有时候也需要瞻前顾后，找准定位。环视就是要求匹配部分的前面或后面要满足（或不满足）某种规则，有些地方也称环视为零宽断言。
     左尖括号代表看左边，没有尖括号是看右边，感叹号是非的意思。
     查看图片 正则_环视.png   
     环视与子组
     环视中虽然也有括号，但不会保存成子组。保存成子组的一般是匹配到的文本内容，后续用于替换等操作，而环视是表示对文本左右环境的要求，即环视只匹配位置，不匹配文本内容。
     
     the little cat cat2 is in the hat hat2, we like it.
     (\w+) \1 匹配重复的单词，但是cat和cat2是两个单词
     \b(\w+)\s\1\b  可以正常匹配重复单词